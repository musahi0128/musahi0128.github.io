<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>VNC on headless VM or container</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />

<link rel="stylesheet" href="/application.a042f2dd3efc476ed4ca880aee2b0ad9c0cbb87c6eb11bb0fcb97d62e6099988.css" integrity="sha256-oELy3T78R27UyogK7isK2cDLuHxusRuw/Ll9YuYJmYg=" />





  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/site/android-chrome-512x512_hu15959206232224009283.png" />

<meta property="og:url" content="http://localhost:1313/posts/os/ubuntu/vncserver_headless/">
  <meta property="og:site_name" content="Moh. Sarip Hidayat, S.Tr.Kom">
  <meta property="og:title" content="VNC on headless VM or container">
  <meta property="og:description" content="Setting up xtigervnc server on Ubuntu running on headless VM or container">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-09T00:29:00+07:00">
    <meta property="article:modified_time" content="2024-12-09T00:29:00+07:00">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="VNC on headless VM or container">
  <meta name="twitter:description" content="Setting up xtigervnc server on Ubuntu running on headless VM or container">

    
    
<meta name="description" content="Setting up xtigervnc server on Ubuntu running on headless VM or container" />



    

    
        
            
            

            
            

            
            
                
                    <script data-goatcounter="https://musahi0128.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
                    
            

            
            

            

            

            
        
    




<script>
      theme = localStorage.getItem('theme-scheme') || localStorage.getItem('darkmode:color-scheme') || 'light';
      if (theme == 'system') {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          theme = 'dark';
        } else {
          theme = 'light';
        }
      }
      document.documentElement.setAttribute('data-theme', theme);
    </script>
  </head>

  <body class="type-posts kind-page" data-bs-spy="scroll" data-bs-target="#TableOfContents" data-bs-offset="80">
    <div class="container-fluid bg-secondary wrapper">
      
      
    















  


  




  
  
    
  
  



  
  
    
  
  










  




  


<nav class="navbar navbar-expand-xl top-navbar shadow " id="top-navbar">
  <div class="container">
    
    <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button">
      <i data-feather="sidebar"></i>
    </button>
    
    <a class="navbar-brand" href="/">
      
        <img src="/images/site/android-chrome-512x512_hu15959206232224009283.png" id="logo" alt="Logo">
      Moh. Sarip Hidayat, S.Tr.Kom</a>
    <button
      class="navbar-toggler navbar-light"
      id="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#top-nav-items"
      aria-label="menu"
    >
      <i data-feather="menu"></i>
    </button>

    <div class="collapse navbar-collapse dynamic-navbar" id="top-nav-items">
      <ul class="nav navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/#home">Home</a>
        </li>
        
          
          
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#about">About</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#skills">Skills</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#experiences">Experiences</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#education">Education</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#projects">Projects</a>
                </li>
              
            
            
            
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#accomplishments">Accomplishments</a>
                </li>
              
            
            
          
        
        
          <div id="top-navbar-divider"></div>
        
        
          <li class="nav-item">
            <a class="nav-link" id="blog-link" href="/posts">Posts</a>
          </li>
        
        
        
        
        
          



  
  


<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle"  href="#" id="themeSelector" role="button"
  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <img id="navbar-theme-icon-svg" class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
</a>
<div id="themeMenu" class="dropdown-menu dropdown-menu-icons-only" aria-labelledby="themeSelector">
  
  <a class="dropdown-item nav-link" href="#" data-scheme="light">
    <img class="theme-icon" src="/icons/sun-svgrepo-com.svg" width=20 alt="Light Theme">
  </a>
  
  
  <a class="dropdown-item nav-link" href="#" data-scheme="dark">
    <img class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
  </a>
  
  
  <a class="dropdown-item nav-link" href="#" data-scheme="system">
    <img class="theme-icon" src="/icons/computer-svgrepo-com.svg" width=20 alt="System Theme">
  </a>
  
</div>
</li>

        
      </ul>
    </div>
  </div>
  
  
    <img src="/images/site/android-chrome-512x512_hu15959206232224009283.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/site/android-chrome-512x512_hu15959206232224009283.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts/" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
    
    
  
  
    
    <li>
      <i data-feather="minus-circle"></i><a class="active list-link" href="/posts/os/"> Operating systems</a>
      
      <ul class="active">
        
  
  
  
  
    
    
  
  
    
    <li>
      <i data-feather="minus-circle"></i><a class="active list-link" href="/posts/os/ubuntu/"> Ubuntu</a>
      
      <ul class="active">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/os/ubuntu/xfce4-papirus-dracula/" title="Xfce4 &#43; Papirus icon &#43; Dracula theme = ðŸ–¤">Xfce4 &#43; Papirus icon &#43; Dracula theme = ðŸ–¤</a></li>
  

  
  
  
  
    
    
  
  
    
    <li><a class="active list-link" href="/posts/os/ubuntu/vncserver_headless/" title="VNC on headless VM or container">VNC on headless VM or container</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/os/ubuntu/vncserver_wsl2/" title="VNC on WSL2">VNC on WSL2</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/posts/monitoring/"> Monitoring</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/monitoring/zabbix-host-ssh/" title="Zabbix: monitor host over SSH">Zabbix: monitor host over SSH</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/monitoring/zabbix-setup-script-noble-arm64/" title="Zabbix setup script for Ubuntu Noble ARM64/AArch64">Zabbix setup script for Ubuntu Noble ARM64/AArch64</a></li>
  


      </ul>
    </li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(/images/posts/tigervnc.svg);'>
      </div>

      
      <div class="page-content">
        
        <div class="author-profile ms-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author/musahi0128_hu11034217487868332195.jpg' alt="Author Image">
          <h5 class="author-name">Moh. Sarip Hidayat, S.Tr.Kom</h5>
          <p class="text-muted">Monday, December 9, 2024 | 3 minutes</p>
        </div>
        

        <div class="title">
          <h1>VNC on headless VM or container</h1>
        </div>

        

        
          <div class="tags">
  <ul style="padding-left: 0;">
    
  </ul>
</div>

        
        <div class="post-content" id="post-content">
          <p><em>Sorry for the tiger eye staring at you. I find it funny so I choose to keep it that way</em> ðŸ¤£</p>
<p>Headless VM or container didn&rsquo;t have any display device attached, so when you want to run a graphical application or a desktop environment, you will have to setup a virtual display. One way to do it is running a VNC server.</p>
<p>VNC stands for <strong>V</strong>irtual <strong>N</strong>etwork <strong>C</strong>omputing,  a graphical desktop-sharing system that uses the Remote Frame Buffer protocol (RFB) to remotely control another computer. It transmits the keyboard and mouse input from one computer to another, relaying the graphical-screen updates, over a network. Read more <a href="https://en.wikipedia.org/wiki/VNC" title="Virtual Network Computing" target="_blank" rel="noopener">here</a>.</p>
<p>I will demonstrate how to setup a VNC server using <code>tigervnc</code> package. This is tested on fresh install of Ubuntu 24.04.1 LTS running on LXD container.</p>
<h2 id="setting-up">Setting up</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Update list of available packages</span>
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Install required packages</span>
</span></span><span style="display:flex;"><span>sudo apt install tigervnc-standalone-server tigervnc-xorg-extension
</span></span></code></pre></div><p>Once the packages installed, you need to set a password for the vncserver by running <code>vncpasswd</code> command on your terminal.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ vncpasswd
</span></span><span style="display:flex;"><span>Password:
</span></span><span style="display:flex;"><span>Verify:
</span></span><span style="display:flex;"><span>Would you like to enter a view-only password <span style="color:#f92672">(</span>y/n<span style="color:#f92672">)</span>?
</span></span></code></pre></div><p>When you type in the password, it will show nothing, so proceed with caution. If you want to share the screen later with somebody else and let them only view the display, you can say <code>y</code> when offered to put in the view-only password.</p>
<p><code>tigervnc</code> password can only hold 8 characters. You can type in as many characters as you like and it will not warn you, but then it will be truncated to the first 8 characters.</p>
<p>After the password is set, you can then run <code>vncserver -localhost=0</code>. By default it will run in the background, set the server for display :1 and accept only connection from localhost. The <code>-localhost=0</code> switch make sure it also accept connection coming from outside of localhost. Otherwise, you will only able to connect to it while having SSH session, do a port mapping to the vnc server port and connect to the mapped port on your own host.</p>
<p>Next, you can run a graphical application or desktop environment by adding <code>DISPLAY=:1</code> before the command.</p>
<p>For example, to run <code>xeyes</code> (part of <a href="https://packages.ubuntu.com/noble/x11-apps" title="x11-apps package" target="_blank" rel="noopener">x11-apps</a> package), you can type <code>DISPLAY=:1 xeyes</code> on your terminal.</p>
<p>Another way to run application on the vnc server is to include it in the <code>vncserver</code> command. The above example can be run using this command when starting up the vnc server: <code>vncserver -localhost=0 -- xeyes</code>.</p>
<h2 id="access">Access</h2>
<p>Access the virtual display using a vnc client.</p>
<ul>
<li><a href="https://www.tightvnc.com/download.php" title="TightVNC download page for Windows" target="_blank" rel="noopener">TightVNC Viewer</a>, available as part of TightVNC server installation on Windows</li>
<li><a href="https://remmina.org/how-to-install-remmina/" title="Remmina installation guide" target="_blank" rel="noopener">Remmina</a> on Linux</li>
<li><a href="https://support.apple.com/guide/remote-desktop/set-up-a-computer-running-vnc-software-apdbed09830/mac" title="Set up a computer running VNC software for Remote Desktop" target="_blank" rel="noopener">Apple Remote Desktop</a> or <a href="https://www.realvnc.com/en/connect/download/viewer/macos" title="RealVNC download page" target="_blank" rel="noopener">RealVNC</a> on Mac OS. I don&rsquo;t have Mac so this is not tested.</li>
</ul>
<p>The vnc client will ask you for the address of the server. You should be able to find it using <code>ip addr</code> command.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ip addr
</span></span><span style="display:flex;"><span>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">65536</span> qdisc noqueue state UNKNOWN group default qlen <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span style="display:flex;"><span>    inet 127.0.0.1/8 scope host lo
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet 10.255.255.254/32 brd 10.255.255.254 scope global lo
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet6 ::1/128 scope host
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">1492</span> qdisc mq state UP group default qlen <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>    link/ether 00:15:5d:46:04:ca brd ff:ff:ff:ff:ff:ff
</span></span><span style="display:flex;"><span>    inet 172.25.155.116/20 brd 172.25.159.255 scope global eth0
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet6 fe80::215:5dff:fe46:4ca/64 scope link
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span></code></pre></div><p>On the output above, the address of the server is <strong>172.25.155.116</strong>. You can put 172.25.155.116:5901 on the address input of the vnc client apps.</p>

        </div>

        
        <div class="row ps-3 pe-3">
        
          <div class="col-md-6 share-buttons">
          
            <strong>Share on:</strong>
            
            <a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
            
            
                <a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f&text=VNC%20on%20headless%20VM%20or%20container&via=Moh.%20Sarip%20Hidayat%2c%20S.Tr.Kom" target="_blank">
                  <i class="fab fa-twitter"></i>
                </a>
            
            
                <a  class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f&title=VNC%20on%20headless%20VM%20or%20container" target="_blank">
                  <i class="fab fa-reddit"></i>
                </a>
            
            
            
            
                <a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f&title=VNC%20on%20headless%20VM%20or%20container" target="_blank">
                  <i class="fab fa-linkedin"></i>
                </a>
            
            
             
            
                 <a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=VNC%20on%20headless%20VM%20or%20container http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f" target="_blank">
                  <i class="fab fa-whatsapp"></i>
                </a>
            
            
                <a class="btn icon-button" href="mailto:?subject=VNC%20on%20headless%20VM%20or%20container&body=http%3a%2f%2flocalhost%3a1313%2fposts%2fos%2fubuntu%2fvncserver_headless%2f" target="_blank">
                  <i class="fas fa-envelope-open-text"></i>
                </a>
            
          
          </div>

        
        
          
            
          
          <div class="col-md-6 btn-improve-page">
             
               <a href="https://github.com/musahi0128/musahi0128.github.io/edit/main/content/posts/os/ubuntu/vncserver_headless.md" title="Improve this page" target="_blank" rel="noopener">
            
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        
        </div>



      
      <hr />
        







  





  
  

  
    
    
  
  

  
  

  
  

  
  


<div class="row next-prev-navigator">
  
    <div class="col-md-6 previous-article">
      <a href="/posts/os/ubuntu/xfce4-papirus-dracula/" title="Xfce4 &#43; Papirus icon &#43; Dracula theme = ðŸ–¤" class="btn filled-button">
        <div><i class="fas fa-chevron-circle-left"></i> Prev</div>
        <div class="next-prev-text">Xfce4 &#43; Papirus icon &#43; Dracula theme = ðŸ–¤</div>
      </a>
    </div>
  
  
      
      
        
      
      <div class="col-md-6 next-article">
        <a href="/posts/os/ubuntu/vncserver_wsl2/" title="VNC on WSL2" class="btn filled-button">
          <div>Next <i class="fas fa-chevron-circle-right"></i></div>
          <div class="next-prev-text">VNC on WSL2</div>
        </a>
      </div>
    
</div>

      <hr />

      
      
        
    











<script src="https://giscus.app/client.js"
        data-repo="musahi0128/musahi0128.github.io"
        data-repo-id="R_kgDONQ4Feg"
        data-category="General"
        data-category-id="DIC_kwDONQ4Fes4ClHBK"
        data-mapping="title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang=""
        crossorigin="anonymous"
        async>
</script>





      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn" type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Scroll to top">
    <i class="fas fa-chevron-circle-up"></i>
  </a>
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center ps-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#setting-up">Setting up</a></li>
    <li><a href="#access">Access</a></li>
  </ul>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  

  
  
    
    
      
    
  


  
  
  
    
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-start">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#skills">Skills</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#experiences">Experiences</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#education">Education</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#projects">Projects</a>
                </li>
              
              
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#accomplishments">Accomplishments</a>
                </li>
              
              
            
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Let&#39;s talk!</h5>
          <ul>
            
              
                <li><a href=mailto:musahi0128@gmail.com target="_blank" rel="noopener">
                  <span><i class="fas fa-envelope"></i></span> <span>musahi0128@gmail.com</span>
                </a></li>
              
            
              
                <li><a href=https://github.com/musahi0128 target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>musahi0128</span>
                </a></li>
              
            
              
                <li><a href=https://www.linkedin.com/in/musahi0128 target="_blank" rel="noopener">
                  <span><i class="fab fa-linkedin"></i></span> <span>Moh. Sarip Hidayat, S.Tr.Kom</span>
                </a></li>
              
            
              
                <li>
                  
                  <a href=https://wa.me/6285797412375 target="_blank" rel="noopener">
                    <span><i class=fab&#32;fa-fab&#32;fa-whatsapp></i></span> <span>&#43;6285797412375</span>
                  </a>
                  
                </li>
              
            
              
                <li>
                  
                  <a href=https://t.me/musahi0128 target="_blank" rel="noopener">
                    <span><i class=fab&#32;fa-fab&#32;fa-telegram></i></span> <span>musahi0128</span>
                  </a>
                  
                </li>
              
            
          </ul>
        </div>
        
        
        
      </div>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-start">
        <div class="col-md-4">
          <a id="theme" href="https://github.com/hugo-toha/toha" target="_blank" rel="noopener">
            <img src="/images/theme-logo_hu16779671404603505019.png" alt="Toha Theme Logo">
            Toha
          </a>
        </div>
        <div class="col-md-4 text-center">Â© 2024 Moh. Sarip Hidayat, S.Tr.Kom</div>
        <div class="col-md-4 text-end">
          <a id="hugo" href="https://gohugo.io/" target="_blank" rel="noopener">Powered by
          <img
            src="/images/hugo-logo.svg"
            alt="Hugo Logo"
            height="18"
          />
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script src="/application.a301f9928083d4c2adfde9322c5ef4145d1a698e9333d5adc0626554b54fc4b9.js" integrity="sha256-owH5koCD1MKt/ekyLF70FF0aaY6TM9WtwGJlVLVPxLk=" defer></script>


    
     

    
    

</body>
</html>
